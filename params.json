{
  "name": "知鸟开放平台",
  "tagline": "",
  "body": "# 概述\r\n***\r\n欢迎您成为知鸟开放平台的开发者。知鸟是企业专属移动学习平台。当您成功注册为开发者，可以通过本文档所描述的接口创建知鸟微应用，为企业实现更多丰富且个性化的企业移动应用。\r\n       \r\n假如你是企业用户，要为自己的公司开发微应用，查看企业接入指南。\r\n\r\n开发者可以通过以下方式了解更多关于知鸟开放平台的消息：\r\n\r\n* 1 zhiniao@pingan.com\r\n* 2 www.zhi-niao.com\r\n\r\n# 企业接入指南\r\n***\r\n此处为企业接入微应用的快速指南，您可以将已有系统快速接入知鸟，也可以独立开发一个微应用按步骤接入知鸟。您需要经过以下几步：\r\n\r\n* 1 [Step-1: 企业自助签约流程](http://www.zhi-niao.com)\r\n* 2 [Step-2: 新增微应用](http://www.zhi-niao.com)\r\n* 3 [Step-3: 配置微应用](http://www.zhi-niao.com) \r\n* 3 [Step-4: 开发微应用](http://www.zhi-niao.com) \r\n\r\n## 企业自助签约流程\r\n\r\n一、进入知鸟后台，注册知鸟企业账号。\r\n\r\n二、输入企业基本信息。\r\n\r\n三、通过知鸟后台，完成员工信息导入。\r\n\r\n## 新增微应用\r\n\r\n注册成为知鸟企业账号后，就可以进入知鸟后台，知鸟设置里面新增微应用了。\r\n\r\n知鸟设置，选择微应用tab。\r\n\r\n![image](http://7rylau.com1.z0.glb.clouddn.com/home.PNG)\r\n\r\n点击**新增微应用**，按下图信息填写微应用信息\r\n\r\n![](https://img.alicdn.com/tps/TB1Qe_XJFXXXXalXpXXXXXXXXXX-598-477.png)\r\n\r\n首页地址 : 以http://或者https:// 开头的URL，是微应用的首页地址；在移动设备上打开相应的微应用将访问这个URL指向的页面。\r\n\r\n新增微应用提交成功后，会得到微应用的AppID和AppSecret。\r\n\r\n## 配置微应用\r\n\r\n应用创建成功后，需要在知鸟后台配置微应用，APP上才可以看到\r\n\r\n知鸟设置，自定义首页\r\n\r\n![image](http://7rylau.com1.z0.glb.clouddn.com/111111111111111111111111.PNG)\r\n\r\n在头条，自定义频道，自定义栏目里面都可以配置微应用\r\n\r\n![image](http://7rylau.com1.z0.glb.clouddn.com/111111111111111111111111112.PNG)\r\n\r\n## 开发微应用\r\n知鸟开放提供丰富的接口、工具供您使用，用以降低您的开发成本：\r\n\r\n知鸟开放平台提供了定制的微应用在知鸟客户端的专用运行容器，并提供了一组可以调用知鸟的本地能力和业务能力的JSApi接口，您可以通过这些接口使用知鸟的本地能力或者知鸟的业务逻辑，进行微应用与知鸟功能的结合；接口使用可以参考客户端开发文档。\r\n# 服务端开发文档\r\n***\r\n## 获取AccessToken\r\nAccessToken是企业访问知鸟开放平台接口的全局唯一票据，调用接口时需携带AccessToken。\r\n\r\nAccessToken需要用AppID和AppSecret来换取，不同的AppSecret会返回不同的AccessToken。正常情况下AccessToken有效期为7200秒，有效期内重复获取返回相同结果，并自动续期。\r\n\r\n**请求说明**\r\n\r\nhttps请求方式: GET https://oapi.zhi-niao.com/gettoken?appid=id&appsecret=secrect\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| appid| string | 是 |应用ID|\r\n| appsecret|string|否|应用密钥 |\r\n\r\n**返回说明**\r\n\r\n正确的返回结果\r\n\r\n    {\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\",\r\n    \"access_token\": \"返回用户凭证\"\r\n    }\r\n\r\n错误的返回结果\r\n\r\n    {\r\n    \"errcode\": 400,\r\n    \"errmsg\": \"错误信息\"\r\n    }\r\n\r\n##获取jsapi_ticket\r\n\r\n企业在使用微应用中的JS API时，需要先从知鸟开放平台接口获取jsapi_ticket生成签名数据，并将最终签名用的部分字段及签名结果返回到H5中，JS API底层将通过这些数据判断H5是否有权限使用JS API。\r\n\r\n**请求说明**\r\n\r\nhttps请求方式: GET https://oapi.zhi-niao.com/get_jsapi_ticket?access_token=ACCESS_TOKE\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| access_token| string | 是 |接口凭证|\r\n| type|string|是|固定值jsapi |\r\n\r\n**返回说明**\r\n正确的返回结果\r\n\r\n    {\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\",\r\n    \"expires_in\": 7200\r\n    \"ticket\": \"JS API的临时票据\"\r\n    }\r\n\r\n错误的返回结果\r\n\r\n    {\r\n    \"errcode\": 400,\r\n    \"errmsg\": \"错误信息\"\r\n    }\r\n\r\n# 客户端开发文档\r\n***\r\n\r\n## 新手引导\r\n在开发微应用之前，需要了解知鸟开放平台对微应用的定义。知鸟微应用是指借助知鸟平台提供的本地能力和业务能力API，开发的html5应用。\r\n\r\n调用JS-API需要引入js文件zhiniaoapi.js。js文件版本在添加升级功能时地址会变化，如有需要（比如要使用新增的js-api）,请随时关注地址变更。但是旧版本js文件也将一直可用。\r\n\r\nhttp://js.zhi-niao.com/3.3.4/scripts/zhiniaoapi.js\r\n\r\n直接引入zhiniaoapi.js会得到一个全局变量zn，支持amd、cmd引入方式。全局变量zn，注意全局变量命名不能有冲突。\r\n\r\n## 授权认证\r\n\r\n知鸟JS API安全验证，只有经过安全验证的微应用才能调用安全级别较高的API。\r\n如果开发者想使用知鸟开放的jsapi接口，需要经过以下流程：\r\n\r\n* 1 [获取jsapi_ticket](http://www.zhi-niao.com)\r\n* 2 [JS-API权限签名算法，生成签名](http://www.zhi-niao.com)\r\n* 3 [JS API安全验证](http://www.zhi-niao.com)\r\n\r\n### JS-API权限签名算法\r\n签名生成的规则：\r\n\r\nList keyArray = sort(noncestr,timestamp,jsapi_ticket,url);\r\n\r\nString str = assemble(keyArray);\r\n\r\nsignature = sha1(str);\r\n\r\n参与签名的字段包括在上文中获取的jsapi_ticket，noncestr（随机字符串，自己随便填写即可）,timestamp（当前时间戳，具体值为当前时间到1970年1月1号的秒数）,url（当前网页的URL，不包含#及其后面部分）。例如：\r\n\r\nnoncestr=Zn4zmLFKD0wzilzM\r\njsapi_ticket=mS5k98fdkdgDKxkXGEs8LORVREiweeWETE40P37wkidkfksDSKDJFD5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcKIDU8l\r\ntimestamp=1414588745\r\nurl=http://www.zhi-niao.com\r\n\r\n步骤1. sort()含义为对所有待签名参数按照字段名的ASCII 码从小到大排序（字典序）\r\n\r\n步骤2. assemble()含义为根据步骤1中获的参数字段的顺序，使用URL键值对的格式（即key1=value1&key2=value2…）拼接成字符串\r\n\r\n步骤2. sha1()的含义为对在步骤2拼接好的字符串进行sha1加密。\r\n\r\n### JS API安全验证\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| appid| string | 是 |应用ID|\r\n| companyid|string|是|企业ID |\r\n| timeStamp|string|是|生成签名的时间戳 |\r\n| random|string|是|生成签名的随机串 |\r\n| signature|string|是|签名 |\r\n| apis|string|是|需要调用的jsapi列表 |\r\n\r\n**代码示例**\r\n\r\n    zn.config({\r\n    appid: '', // 必填，微应用ID\r\n    companyid: '',//必填，企业ID\r\n    timeStamp: , // 必填，生成签名的时间戳\r\n    random: '', // 必填，生成签名的随机串\r\n    signature: '', // 必填，签名\r\n    apis: ['', ''] // 必填，需要使用的jsapi列表\r\n    });\r\n            \r\n**验证成功**\r\n\r\nzn.ready参数为回调函数，在环境准备就绪时触发，jsapi的调用需要保证在该回调函数触发后调用，否则无效。\r\n\r\n    zn.ready(function(){\r\n    ;\r\n    });\r\n\r\n**验证失败**\r\n\r\nconfig信息验证失败会执行error函数，错误信息可以在返回的error参数中参看\r\n\r\n    dd.error(function(error){\r\n    ;\r\n    });\r\n\r\n## 接口约定\r\n* 1所有接口都为异步\r\n* 2接受一个JSONObject类型的参数\r\n* 3成功回调 onSuccess\r\n* 4失败回调 onFail\r\n\r\n**接口示例**\r\n\r\n    zn.方法({\r\n    参数1: '',\r\n    参数2: '',\r\n    onSuccess: function(result) {\r\n    //成功回调\r\n    /*\r\n    {\r\n        //所有返回信息都输出在这里\r\n    }*/\r\n    },\r\n    onFail: function(){\r\n    //失败回调\r\n    }\r\n    })\r\n\r\n## DEMO和调试\r\n\r\n我们提供了Demo和开发版知鸟给您的开发提供方便，如果对调用参数有疑问，请使用开发版知鸟调试。对jsapi用法有疑问，可查看Demo.\r\n\r\n**微应用DEMO地址: ** [http://www.zhi-niao.com](http://www.zhi-niao.com)\r\n\r\n**知鸟开发版下载地址: ** [http://www.zhi-niao.com](http://www.zhi-niao.com)\r\n\r\n## JS-API文档\r\n\r\n### 工具方法\r\n\r\n命名空间 zn.utils\r\n\r\n#### 发起网络请求\r\nzn.utils.request\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| url| String | 是 |请求url|\r\n| params|JSONObject|否|请求参数 |\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| info| JSONObject |请求数据|\r\n| type| String |类型|\r\n\r\n**示例**\r\n\r\n\tzn.utils.request({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            type: '1',\r\n            info: {}\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n    url:'http://www.zhi-niao.com',\r\n    params:{}\r\n\t});\r\n\r\n#### 下载图片\r\nzn.utils.download\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| imageArray| String[] | 是 |下载图片数组|\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |下载结果|\r\n\r\n**示例**\r\n\r\n\tzn.utils.download({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n    imageArray:['http://www.zhi-niao.com','http://www.zhi-niao.com']\r\n\t});\r\n\r\n#### 添加埋点\r\nzn.utils.talkingdata\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| event| String | 是 |埋点事件|\r\n| label| String | 是 |埋点标签|\r\n| params| JSONObject | 是 |埋点内容|\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |结果|\r\n\r\n**示例**\r\n\r\n\tzn.utils.talkingdata({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n    event:‘login001'，\r\n    label:'登录'，\r\n    params:{}\r\n\t});\r\n\t\r\n#### \t获取用户信息\r\nzn.utils.userinfo\r\n\t\r\n**参数说明**\r\n\r\n无需参数\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| userid| String |用户id|\r\n| companyid| String |用户公司id|\r\n| username| String |用户名|\r\n\r\n**示例**\r\n\r\n\tzn.utils.userinfo({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n            userid: '100001',\r\n            companyid: '101',\r\n            username: '鸟宝'\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {}\r\n\t});\r\n\t\r\n#### \t开启摇一摇\r\n\r\nzn.utils.shake\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| flag| String | 是 |是否开启|\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |结果|\r\n\r\n**示例**\r\n\r\n\tzn.utils.shake({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n    flag:‘true'，\\\\true：开启，false：关闭\r\n\t});\r\n\t\r\n### \tUI组件\r\n命名空间 zn.interface\r\n#### 显示进度条\r\n\r\nzn.interface.showloading\t\r\n\r\n**参数说明**\r\n无需参数\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |结果|\r\n\r\n**示例**\r\n\r\n\tzn.interface.showloading({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n\t});\r\n\r\n#### 关闭进度条\r\n\r\nzn.interface.closeloading\t\r\n\r\n**参数说明**\r\n无需参数\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |结果|\r\n\r\n**示例**\r\n\r\n\tzn.interface.closeloading({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n\t});\r\n\t\r\n#### 显示Alert\r\n\r\nzn.interface.showAlert\r\n\r\n**参数说明**\r\n无需参数\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |结果|\r\n\r\n**示例**\r\n\r\n\tzn.interface.showAlert({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n\t});\r\n\t\r\n#### 刷新导航栏\r\n\r\nzn.interface.refreshNav\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| type| String | 是 |导航栏类型|\r\n| title| String | 是 |导航栏标题|\r\n| right| String | 是 |导航栏右侧按钮名称|\r\n\r\n**返回说明**\r\n\r\n| 参数 | 参数类型 | 说明 |\r\n| -----|:----:|----:|\r\n| result| String |结果|\r\n\r\n**示例**\r\n\r\n\tzn.interface.refreshNav({\r\n    onSuccess : function(data) {\r\n        /*\r\n        {\r\n            result: '1',\r\n        }\r\n        */\r\n    },\r\n    onFail : function(err) {},\r\n    type: '1',\\\\1 做菜单按钮、搜索框 ；2 返回按钮、搜索框、搜索\r\n                3返回按钮、title、右边按钮； 4 返回按钮、title\r\n    title: 'weka联盟',\r\n    right: '搜索'\r\n\t});\r\n\t\r\n### 业务\r\n命名空间 cn.business\r\n\r\n#### 打开应用内页面\t\r\ncn.business.open\r\n\r\n**参数说明**\r\n\r\n| 参数 | 参数类型 | 必须 | 说明 |\r\n| -----|:----:| ----:| ----:|\r\n| name| String | 是 |页面名称|\r\n| params| JSONObject | 是 |页面参数|\r\n\r\n目前支持的页面：\r\n\r\n* 1 课程详情\r\n* 2 资讯详情\r\n* 3 话题详情\r\n* 4 二级页面\r\n* 5 特定页面\r\n* 6 排行榜\r\n* 7 个人中心\r\n* 8 播放课程\r\n* 9 下载课程\r\n* 10 公共频道\r\n* 11 课程专题\r\n* 12 扫一扫签到\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}